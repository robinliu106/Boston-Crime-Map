(this["webpackJsonpfive-o"]=this["webpackJsonpfive-o"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(10),i=n.n(o),r=n(14),l=n(13),s=n(20),d=n(7),u=n.n(d),f=n(47),E=n(49),g=(n(81),n(19)),m=n.n(g),p=(Object(l.b)((function(e){return{date:e.date}}))((function(e){console.log("running get INcidents");console.log("hi",e.date),m.a.get("https://data.boston.gov/api/3/action/datastore_search?resource_id=12cb3883-56f5-47de-afa5-3b1cf61b257b&q=").then((function(e){var t=e.data.result.records.filter((function(e){return e.Lat||e.Long}));console.log("clean records",t)}))})),function(e){return c.a.createElement("div",null,c.a.createElement("section",{className:"hero is-info"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("p",{className:"title"},c.a.createElement("h1",null,e.incidentDescription?e.incidentDescription:"")),c.a.createElement("p",{className:"subtitle"},e.incidentDate?u()(e.incidentDate).format("dddd, MMMM Do YYYY, h:mm a"):""),c.a.createElement("p",{className:"subtitle"}," ",e.center?c.a.createElement("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(e.center.lat,",").concat(e.center.lng),target:"_blank"},e.incidentStreet):""))))}),b=(n(99),{width:"100%",height:"100%"}),D=Object(l.b)((function(e){return{date:e.date}}),(function(e){return{setDate:function(t){return e(function(e){return{type:"SET_DATE",date:e}}(t))},setIncidents:function(t){return e(function(e){return{type:"SET_INCIDENTS",incidents:e}}(t))}}}))(Object(s.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/Five.o",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_MAPS_API_KEY})((function(e){var t=Object(a.useState)({}),n=Object(r.a)(t,2),o=n[0],i=n[1],l=Object(a.useState)([]),d=Object(r.a)(l,2),g=d[0],D=d[1],O=Object(a.useState)({}),v=Object(r.a)(O,2),_=v[0],h=v[1],S=Object(a.useState)(),T=Object(r.a)(S,2),Y=T[0],N=T[1],j=Object(a.useRef)(),C=function(e){var t=[];e.map((function(e){var n={latitude:parseFloat(e.Lat),longitude:parseFloat(e.Long)};t.push(n)})),console.log("locations",t);var n=Object(f.getCenterOfBounds)(t);i({latitude:n.latitude,longitude:n.longitude})};Object(a.useEffect)((function(){!function(e){var t="https://data.boston.gov/api/3/action/datastore_search?resource_id=12cb3883-56f5-47de-afa5-3b1cf61b257b&q=";t+=Y||(new u.a).format("YYYY-MM-DD"),m.a.get(t).then((function(e){var t=e.data.result.records,n=t.filter((function(e){return e.Lat||e.Long}));console.log("clean records",n),D(n),t.length>0&&C(n)}))}(),console.log("incidentDetails",_)}),[_]);var M=function(){h({})},w=function(e){console.log("circle clicked"),h({description:e.incidentDescription,date:e.incidentDate,street:e.incidentStreet,location:e.center})};return c.a.createElement("div",{className:"main"},c.a.createElement("div",{id:"mapBox"},c.a.createElement(s.Map,{onLoad:function(e){return j.current=e},google:e.google,zoom:14,style:b,disableDefaultUI:!0,draggable:!1,center:{lat:o.latitude||42.345095,lng:o.longitude||-71.103415},onClick:function(){M()},scrollwheel:!1},g.map((function(e){var t={lat:parseFloat(e.Lat),lng:parseFloat(e.Long)};return c.a.createElement(s.Circle,{radius:100,center:t,onMouseover:function(){return console.log("mouseover")},onClick:w,onMouseout:function(){return console.log("mouseout")},strokeColor:"transparent",strokeOpacity:0,strokeWeight:5,fillColor:"#FF4500",fillOpacity:.8,key:e._id,incidentDescription:e.OFFENSE_DESCRIPTION,incidentDate:e.OCCURRED_ON_DATE,incidentStreet:e.STREET})})))),c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",null,c.a.createElement(E.a,{onChange:function(t){console.log(u()(t).format("YYYY-MM-DD")),N(u()(t).format("YYYY-MM-DD")),e.setDate(u()(t).format("YYYY-MM-DD")),M()},maxDate:new Date})),c.a.createElement("div",{className:"crimeTab"},c.a.createElement(p,{incidentDescription:_.description,incidentDate:_.date,incidentStreet:_.street,center:_.location}))))}))),O=n(48),v=n(11),_={incidents:[]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INCIDENTS":return{incidents:t.incidents};default:return e}},S={date:""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATE":return{date:t.date};default:return e}},Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d,N=(n(115),Object(v.e)(Object(v.c)({incidents:h,date:T}),Y(Object(v.a)(O.a)))),j=c.a.createElement(l.a,{store:N},c.a.createElement(D,null));i.a.render(j,document.getElementById("root"))},50:function(e,t,n){e.exports=n(116)},99:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.050a0b37.chunk.js.map